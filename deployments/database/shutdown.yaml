# Automated Server Template Test using resat framework
#

name: Destroy_Server_Template_Deployment
ignore: no
steps:

  - request:
      resource:         servers
      id:               $DB_Master
      custom:
        name:           stop
        type:           post
        separator:      "/"

  - request:
      resource:         servers
      id:               $DB_Slave
      custom:
        name:           stop
        type:           post
        separator:      "/"

  - request:
      operation:        show
      resource:         servers
      id:               $DB_Master
    guards:
      - target:         body
        field:          server/state
        pattern:        "stopped"
        period:         10
        timeout:        300
        name:           DB_Master_op

  - request:
      operation:        show
      resource:         servers
      id:               $DB_Slave
    guards:
      - target:         body
        field:          server/state
        pattern:        "stopped"
        period:         10
        timeout:        300
        name:           DB_Slave_op



  